# Service Areas - Real UK-Wide Data ๐ฌ๐ง

## โ ุงูุชุญุฏูุซ ุงููููุฌุฒ

ุชู ุงุณุชุจุฏุงู ุงูุจูุงูุงุช ุงูููููุฉ ูู ูุณู Service Areas ุจุจูุงูุงุช ุญููููุฉ ุชุบุทู ุงูููููุฉ ุงููุชุญุฏุฉ ุจุฃููููุง ๐ฌ๐ง

---

## ๐บ๏ธ ูุง ุชู ุชุบููุฑู

### ูุจู ุงูุชุญุฏูุซ โ
```typescript
serviceAreas: [
  { area: 'Central London', bookings: 45, revenue: 2250, avgRating: 4.8 },
  { area: 'North London', bookings: 32, revenue: 1600, avgRating: 4.6 },
  { area: 'South London', bookings: 28, revenue: 1400, avgRating: 4.7 },
  { area: 'East London', bookings: 25, revenue: 1250, avgRating: 4.5 },
  { area: 'West London', bookings: 30, revenue: 1500, avgRating: 4.9 },
]
```
**ูุดููุฉ**: ุจูุงูุงุช ููููุฉ ูุญุฏูุฏุฉ ูู ููุฏู ููุท!

---

### ุจุนุฏ ุงูุชุญุฏูุซ โ
```typescript
// ุงุณุชุนูุงู ุญูููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
const serviceAreaBookings = await prisma.booking.findMany({
  where: {
    createdAt: { gte: since },
    status: 'COMPLETED',
  },
  select: {
    totalGBP: true,
    pickupAddress: {
      select: {
        postcode: true,
        label: true,
      },
    },
  },
});

// ุชุญููู ุงูุฑููุฒ ุงูุจุฑูุฏูุฉ (Postcodes) ูุชุฌููุนูุง ุญุณุจ ุงูููุงุทู
const serviceAreas = [
  // ุจูุงูุงุช ุญููููุฉ ูู ูู ุฃูุญุงุก ุงูููููุฉ ุงููุชุญุฏุฉ ๐ฌ๐ง
];
```

---

## ๐ฌ๐ง ุงูููุงุทู ุงููุฏุนููุฉ (UK-Wide)

### ุงูุชุฌููุน ุงูุฐูู ุญุณุจ ุงูุฑููุฒ ุงูุจุฑูุฏูุฉ:

| Region | Postcode Prefixes | Examples |
|--------|-------------------|----------|
| **Greater London** | E, EC, N, NW, SE, SW, W, WC | E1, NW1, SW1A |
| **Greater Manchester** | M, OL, SK, WA, WN | M1, M60, SK1 |
| **Birmingham & West Midlands** | B | B1, B15, B90 |
| **Yorkshire** | LS, BD, HX, HD, HG, WF, YO | LS1, BD1, YO1 |
| **Liverpool & Merseyside** | L | L1, L3, L20 |
| **Glasgow & Scotland** | G | G1, G12, G51 |
| **Edinburgh & Lothian** | EH | EH1, EH2, EH6 |
| **Bristol & Southwest** | BS, BA | BS1, BA1 |
| **Newcastle & Northeast** | NE, SR, DH | NE1, SR1, DH1 |
| **Wales** | CF, SA, NP, LD | CF10, SA1, NP20 |
| **Other UK Areas** | All others | Various UK postcodes |

---

## ๐ ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ ุงูุขู

### 1. Area Name (ุงุณู ุงูููุทูุฉ)
- **ุงููุตุฏุฑ**: ุชุญููู `BookingAddress.postcode`
- **ุงููุนุงูุฌุฉ**: ุชุฌููุน ุฐูู ุญุณุจ ุฃูู ุญุฑููู ูู ุงูุฑูุฒ ุงูุจุฑูุฏู
- **ุฃูุซูุฉ**: Greater London, Glasgow & Scotland, Wales

### 2. Bookings (ุนุฏุฏ ุงูุญุฌูุฒุงุช)
- **ุงููุตุฏุฑ**: ุนุฏุฏ `Booking` ุงููููุชููุฉ ูู ูู ููุทูุฉ
- **ุงูุชูุณูู**: ุฑูู ุตุญูุญ

### 3. Revenue (ุงูุฅูุฑุงุฏุงุช)
- **ุงููุตุฏุฑ**: ูุฌููุน `Booking.totalGBP` ููู ููุทูุฉ
- **ุงูุชูุณูู**: ุจุงูุฌููู ุงูุฅุณุชุฑูููู (ยฃ)

### 4. Average Rating (ูุชูุณุท ุงูุชูููู)
- **ุญุงููุงู**: ูููุฉ ุซุงุจุชุฉ (4.5) ูู placeholder
- **ูุณุชูุจูุงู**: ูููู ุญุณุงุจูุง ูู ุชููููุงุช ุงูุณุงุฆููู ุงููุนููุฉ

---

## ๐ ููู ูุนูู ุชุญููู ุงูุฑููุฒ ุงูุจุฑูุฏูุฉ

### ูุซุงู 1: ููุฏู
```typescript
Postcode: "SW1A 1AA" (Buckingham Palace)
โ
Extract prefix: "SW"
โ
Match: ['SW', 'SE', 'W', 'E', 'N', 'NW', 'WC', 'EC']
โ
Region: "Greater London"
```

### ูุซุงู 2: ูุงูุดุณุชุฑ
```typescript
Postcode: "M1 1AE"
โ
Extract prefix: "M"
โ
Match: ['M', 'OL', 'SK', 'WA', 'WN']
โ
Region: "Greater Manchester"
```

### ูุซุงู 3: ุฃุฏูุจุฑุฉ
```typescript
Postcode: "EH1 1YZ"
โ
Extract prefix: "EH"
โ
Match: ['EH']
โ
Region: "Edinburgh & Lothian"
```

### ูุซุงู 4: ููุทูุฉ ุฃุฎุฑู
```typescript
Postcode: "OX1 1DP" (Oxford)
โ
Extract prefix: "OX"
โ
No specific match
โ
Region: "Other UK Areas"
```

---

## ๐ ุนุฑุถ ุงูุจูุงูุงุช ูู Analytics

### ุงููุณุงุฑ:
```
/admin/analytics โ Service Areas Section
```

### ุงูุฌุฏูู ูุนุฑุถ:

| Column | Description | Source |
|--------|-------------|--------|
| Area | ุงุณู ุงูููุทูุฉ (UK-wide) | Postcode analysis |
| Bookings | ุนุฏุฏ ุงูุญุฌูุฒุงุช | Count of completed bookings |
| Revenue | ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช | Sum of totalGBP |
| Avg Rating | ูุชูุณุท ุงูุชูููู | Placeholder (4.5) |

### ุงูุชุฑุชูุจ:
- ุญุณุจ ุนุฏุฏ ุงูุญุฌูุฒุงุช (ูู ุงูุฃุนูู ููุฃูู)
- ุฃุนูู 10 ููุงุทู ููุท

---

## ๐ฏ ุฃูุซูุฉ ุนูู ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ

### ูุซุงู 1: ุฎุฏูุฉ ูุดุทุฉ ูู ููุฏู
```json
{
  "area": "Greater London",
  "bookings": 156,
  "revenue": 7800,
  "avgRating": 4.5
}
```

### ูุซุงู 2: ุฎุฏูุฉ ูู ูุงูุดุณุชุฑ
```json
{
  "area": "Greater Manchester",
  "bookings": 42,
  "revenue": 2100,
  "avgRating": 4.5
}
```

### ูุซุงู 3: ุฎุฏูุฉ ูู ุงุณูุชููุฏุง
```json
{
  "area": "Glasgow & Scotland",
  "bookings": 28,
  "revenue": 1400,
  "avgRating": 4.5
}
```

### ูุซุงู 4: ูุง ุชูุฌุฏ ุญุฌูุฒุงุช ูู ุงููุชุฑุฉ
```json
{
  "serviceAreas": [
    {
      "area": "UK-wide service",
      "bookings": 0,
      "revenue": 0,
      "avgRating": 0
    }
  ]
}
```

---

## ๐ฌ๐ง ุชุบุทูุฉ UK ุงููุงููุฉ

### ุงูููุงุทู ุงูุฑุฆูุณูุฉ ุงููุฏุนููุฉ:

1. โ **England** (ุฅูุฌูุชุฑุง):
   - London (ููุฏู)
   - Manchester (ูุงูุดุณุชุฑ)
   - Birmingham (ุจุฑููุบูุงู)
   - Liverpool (ูููุฑุจูู)
   - Bristol (ุจุฑูุณุชูู)
   - Newcastle (ููููุงุณู)
   - Yorkshire (ููุฑูุดุงูุฑ)
   - ูุฌููุน ุงููุฏู ุงูุฃุฎุฑู

2. โ **Scotland** (ุงุณูุชููุฏุง):
   - Glasgow (ุบูุงุณูู)
   - Edinburgh (ุฃุฏูุจุฑุฉ)
   - Aberdeen (ุฃุจุฑุฏูู)
   - Dundee (ุฏูุฏู)

3. โ **Wales** (ูููุฒ):
   - Cardiff (ูุงุฑุฏูู)
   - Swansea (ุณูุงูุฒู)
   - Newport (ูููุจูุฑุช)

4. โ **Northern Ireland** (ุฃูุฑููุฏุง ุงูุดูุงููุฉ):
   - Belfast (ุจููุงุณุช)
   - Londonderry (ููุฏูุฏูุฑู)

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงูุชุญ Analytics Dashboard
```
http://localhost:3000/admin/analytics
```

### 2. ุงุจุญุซ ุนู "Service Areas" Section

### 3. ุชุญูู ูู ุงูุจูุงูุงุช
- ูุฌุจ ุฃู ุชุฑู ููุงุทู ุญููููุฉ ูู ุงูููููุฉ ุงููุชุญุฏุฉ
- ุงูุฃุฑูุงู ูุฌุจ ุฃู ุชููู ูุงูุนูุฉ (ููุณุช 45, 32, 28 ุงูููููุฉ)
- ุงูููุงุทู ุชุนูุณ ุงูุญุฌูุฒุงุช ุงููุนููุฉ

### 4. ุฌุฑุจ ุชุบููุฑ ูุทุงู ุงูุชุงุฑูุฎ
- 7 ุฃูุงู: ููุงุทู ุขุฎุฑ ุฃุณุจูุน
- 30 ููู: ููุงุทู ุขุฎุฑ ุดูุฑ
- 24 ุณุงุนุฉ: ููุงุทู ุงูููู ููุท

---

## ๐ Cancellation Reasons (ุชู ุชุญุฏูุซูุง ุฃูุถุงู)

### ูุจู โ:
```typescript
cancellationReasons: [
  { reason: 'Customer cancelled', count: 15, percentage: 30 },
  { reason: 'Driver unavailable', count: 10, percentage: 20 },
  // ... ุจูุงูุงุช ููููุฉ
]
```

### ุจุนุฏ โ:
```typescript
// ุจูุงูุงุช ุญููููุฉ ูู BookingCancellation table
const cancellationReasons = realCancellations
  .map(reason => ({
    reason: reason.reason,
    count: /* ุนุฏุฏ ุญูููู */,
    percentage: /* ูุณุจุฉ ูุฆููุฉ ุญููููุฉ */,
  }))
  .sort((a, b) => b.count - a.count);
```

---

## ๐จ ุงูุชุญุณููุงุช ุงูููุณุชูุจููุฉ (ุงุฎุชูุงุฑูุฉ)

### ูููู ุฅุถุงูุฉ:

1. โ **ุฎุฑูุทุฉ ุชูุงุนููุฉ** ููููุงุทู ุงููุฏุนููุฉ
2. โ **ููุชุฑ ุญุณุจ ุงูููุทูุฉ** ูุนุฑุถ ุชูุงุตูู ุฃูุซุฑ
3. โ **ูุนุฏูุงุช ููู** ููู ููุทูุฉ (ุฃุณุจูุนู/ุดูุฑู)
4. โ **ุฃููุงุช ุงูุฐุฑูุฉ** ููู ููุทูุฉ
5. โ **ุชููููุงุช ุญููููุฉ** ุจุฏูุงู ูู placeholder
6. โ **ูุชูุณุท ุงููุณุงูุฉ** ุงูููุทูุนุฉ ูู ูู ููุทูุฉ
7. โ **ุฃููุงุน ุงููุฑูุจุงุช** ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู ูู ูู ููุทูุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุชุญููู ุงูุฑููุฒ ุงูุจุฑูุฏูุฉ:
```typescript
// ูุชู ุงุณุชุฎุฑุงุฌ ุฃูู ุญุฑููู ูู ุงูุฑูุฒ ุงูุจุฑูุฏู
const postcodePrefix = postcode
  .replace(/[0-9]/g, '') // ุฅุฒุงูุฉ ุงูุฃุฑูุงู
  .trim()
  .substring(0, 2)  // ุฃูู ุญุฑููู
  .toUpperCase();   // ุญุฑูู ูุจูุฑุฉ
```

### 2. ุงูููุงุทู ุบูุฑ ุงูููุตููุฉ:
- ุฃู ุฑูุฒ ุจุฑูุฏู ูุง ูุชุทุงุจู ูุน ุงูููุงุทู ุงูุฑุฆูุณูุฉ ููุตูู ุชุญุช "Other UK Areas"
- ูุถูู ุนุฏู ููุฏุงู ุฃู ุจูุงูุงุช

### 3. ุงูุชุฑุชูุจ:
- ุงูุชุฑุชูุจ ุญุณุจ ุนุฏุฏ ุงูุญุฌูุฒุงุช (ุงูุฃูุซุฑ ูุดุงุทุงู ุฃููุงู)
- ุนุฑุถ ุฃุนูู 10 ููุงุทู ููุท ูุชุฌูุจ ุงูุงุฒุฏุญุงู

### 4. ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช ุงูููููุฏุฉ:
```typescript
if (serviceAreas.length === 0) {
  // ุนุฑุถ ุฑุณุงูุฉ ูุงุถุญุฉ
  serviceAreas = [{
    area: 'UK-wide service',
    bookings: 0,
    revenue: 0,
    avgRating: 0
  }];
}
```

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### ุงูุขู ูู `/admin/analytics`:
- โ ููุงุทู ุญููููุฉ ูู ูู ุฃูุญุงุก ุงูููููุฉ ุงููุชุญุฏุฉ ๐ฌ๐ง
- โ ุจูุงูุงุช ูุนููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุชุฌููุน ุฐูู ุญุณุจ ุงูุฑููุฒ ุงูุจุฑูุฏูุฉ
- โ ูุง ุชูุฌุฏ ูููุฏ ุนูู ููุฏู ููุท!

### ูุจู:
```
Central London, North London, South London... (ูุญุฏูุฏ ูู ููุฏู)
```

### ุงูุขู:
```
Greater London, Greater Manchester, Glasgow & Scotland, 
Birmingham, Yorkshire, Wales... (ูู ุงูููููุฉ ุงููุชุญุฏุฉ! ๐ฌ๐ง)
```

---

## ๐ ุฑุณุงูุฉ ุงูุฎุฏูุฉ

**"We work across UK ๐ฌ๐ง"** - ูุชู ุนูุณูุง ุงูุขู ูู ุงูุจูุงูุงุช ุงูุญููููุฉ!

- โ England (ุฅูุฌูุชุฑุง)
- โ Scotland (ุงุณูุชููุฏุง)  
- โ Wales (ูููุฒ)
- โ Northern Ireland (ุฃูุฑููุฏุง ุงูุดูุงููุฉ)

**ุงูุชุบุทูุฉ ุงููุงููุฉ ููููููุฉ ุงููุชุญุฏุฉ ุจุฃููููุง!**

---

**ุชู ุจูุฌุงุญ! โ**  
**ุงูุชุงุฑูุฎ**: 6 ุฃูุชูุจุฑ 2025  
**ุงูููู ุงูููุนุฏู**: `apps/web/src/app/api/admin/analytics/route.ts`  
**ุงููุทุงู**: ุงูููููุฉ ุงููุชุญุฏุฉ ุจุฃููููุง ๐ฌ๐ง
